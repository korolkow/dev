function MeteonovaInf(e){this.opt=e,this.cities="object"==typeof e.cities?e.cities.join("_"):"auto",this.id=void 0!==e.id?e.id:"meteonova_inf_"+e.type+"_"+("object"==typeof e.cities?e.cities.join("_"):"auto"),this.type=e.type,this.url="//www.meteonova.ru",this.callback=null,this.obj=null,this.data=[],this.scheme={},this.timeout=null,this.frameResizeTimeout=null,this.ifr=null,this.dict={weekdays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],full_weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],tods:{tod0:"Ночь",tod1:"Утро",tod2:"День",tod3:"Вечер"},min_months:["Янв","Фев","Мар","Апр","Мая","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},this.install=function(){function t(r){if(void 0!==r){r=parseInt(r,10),isNaN(r)&&(r=-1);var a="meteonova_jsondata_";r<0&&(a=a+"m"+Math.abs(r)),r>0&&(a+=r);var s=window.document.createElement("script");s.type="text/javascript",s.src="//www.meteonova.ru/htmlinfdata"+("special"===o||"rubber"===o?c:"")+"/"+r+"?r="+Math.random(),s.defer=!0,s.onload=s.onerror=function(){if(0==e.cities.length){var r="function "+(new Date).getTime()+"_"+Math.floor(72e5*Math.random())+36e5;!function(e){window[r]=function(){try{delete window[r]}catch(e){window[r]=void 0}e.obj=this,e.draw(this,e.data)}}(i),s=window.document.createElement("script"),s.type="text/javascript",s.src="//www.meteonova.ru/informer/html/js/"+o+"/"+i.type+".js?callback="+r,s.charset="UTF-8",s.inftype=i.type,s.defer=!0,window.document.getElementsByTagName("head")[0].appendChild(s)}try{i.data.push(window[a].call());try{delete window[a]}catch(e){window[a]=void 0}}catch(e){i.data.push({})}t(e.cities.shift())},window.document.getElementsByTagName("head")[0].appendChild(s)}}if(document.getElementById(this.id)){this.setScheme("border_radius","4px",!1);var r=this.opt.colorscheme||"gray";"string"==typeof r?(this.setScheme("box_shadow","inset "+colorSchemes[r][2]+" 0 0 0 1px",!1),this.setScheme("border_color",colorSchemes[r][2],!1),this.setScheme("background_color",colorSchemes[r][1],!1),this.setScheme("city_color",colorSchemes[r][8],!1),this.setScheme("main_color","dark_gray"===r?colorSchemes.dark_gray[8]:colorSchemes.gray[7],!1),this.setScheme("params_color","dark_gray"===r?colorSchemes.dark_gray[7]:colorSchemes.gray[6],!1)):this.scheme=r;var i=this,o="multiple",c="";"auto"===this.cities&&(e.cities=["-1"]),1==e.cities.length&&-1===e.type.indexOf("multiple")&&(o="simple"),(e.type.indexOf("med")>-1||e.type.indexOf("auto")>-1||e.type.indexOf("avia")>-1)&&(o="special"),e.type.indexOf("rubber")>-1&&(o="rubber"),e.type.indexOf("med")>-1&&(c="med"),e.type.indexOf("auto")>-1&&(c="auto"),e.type.indexOf("avia")>-1&&(c="avia"),t(e.cities.shift())}},this.draw=function(e,t){var r=this,i=!!navigator.userAgent.match(/MSIE (6|7|8|9)/);this.ifr=document.createElement("IFRAME"),this.ifr.setAttribute("width",e.width),this.ifr.setAttribute("height",e.height),this.ifr.setAttribute("src",e.src),this.ifr.setAttribute("frameborder",e.frameborder),this.ifr.setAttribute("scrolling",e.scrolling),this.ifr.style.display="block",e.style=e.style.replace("%url%",this.url);try{var o=e.wrapper;contents=this.includeData(e,t)}catch(e){console.log(e),contents=['<div style="display: table; width: 100%; height: 100%"><div style="display: table-cell; vertical-align: middle;"><a href="//www.meteonova.ru" target="blank">\t\t<embed id="svgLogo"  type="image/svg+xml" src="//www.meteonova.ru/informer/html/icons/logo-main.svg" height="14"></a></div></div>']}o=o.replace("%content%",contents.join("")).replace(/%box_shadow%/g,this.scheme.box_shadow).replace("%border_radius%",this.scheme.border_radius).replace("%background_color%",this.scheme.background_color).replace("%border_color%",this.scheme.border_color).replace(/%city_color%/g,this.scheme.city_color).replace(/%main_color%/g,this.scheme.main_color).replace(/%params_color%/g,this.scheme.params_color);var c=(i?"<html>":"<!DOCTYPE html>")+'<head><title>Meteonova informer</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><style>'+e.style+'</style></head><body><div id="informer">'+o+"</div></body></html>",a=document.getElementById(this.id);if(a){a.innerHTML="",this.resize=function(){this.ifr.height=this.ifr.contentWindow.document.body.offsetHeight+"px"},this.ifr.onload=function(){clearTimeout(r.frameResizeTimeout),r.frameResizeTimeout=setTimeout(function(){r.resize(),r.opt.callback&&r.opt.callback.call({data:r.data,cities:r.cities,height:r.ifr.height,width:e.width}),r.fillColorSvgIcon(s,"svgPress",r.scheme.params_color),r.fillColorSvgIcon(s,"svgWind",r.scheme.params_color),r.fillColorSvgIcon(s,"svgHum",r.scheme.params_color),r.fillColorSvgIcon(s,"svgLogo",r.scheme.city_color),r.fillColorSvgIcon(s,"svgLogo"+(contents.length-1),r.scheme.city_color)},250)},a.appendChild(this.ifr);var s=this.ifr.contentWindow||this.ifr.contentDocument.parentWindow;i||s.document.open(),s.document.write(c),i||s.document.close()}"informer"==this.id&&this.setCodeInformer(this)},this.includeData=function(t,r){var i=this;return contents=r.map(function(o,c){function a(e){var t={znak:"&ensp;",value:"",min:{znak:"&ensp;",value:""},max:{znak:"&ensp;",value:""}};e=parseInt(e,10),isNaN(e)&&(e=0),e<0&&(t.znak="&minus;"),e>0&&(t.znak="+"),t.value=Math.abs(e);var r=e-1;r<0&&(t.min.znak="&minus;"),r>0&&(t.min.znak="+"),t.min.value=Math.abs(r);var i=e+1;if(i<0&&(t.max.znak="&minus;"),i>0&&(t.max.znak="+"),t.max.value=Math.abs(i),r<-1){var o=t.max;t.max=t.min,t.min=o}return t}function s(e,t){var r=["Сeв","С-В","Вст","Ю-В","Южн","Ю-З","Зап","С-З","Штиль"],t=parseInt(t.value,10);return isNaN(t)&&(t=0),0==t?{dir:"штиль"}:{dir:r[e.value]+", ",speed:t}}var n=t.content,l=o.forecasts[0];return 0==c&&(i.alt="Погода "+l.name_2,i.name_ref=l.name_ref),n=n.replace(/%alt%/g,i.alt).replace(/%title%/g,i.alt).replace("%href%",void 0!==e.href?e.href:"#").replace("%city%",l.name).replace(/%display%/g,c==r.length-1?"block":"none").replace(/%border_color%/g,i.scheme.border_color).replace("%logocount%",c),void 0!==o.currency&&(n=n.replace("%exchange_usd%",o.currency.exchange.usd.value).replace("%exchange_euro%",o.currency.exchange.eur.value)),l.forecast.forEach(function(e,t){var r=a(e.t.value,e.t.units);0==t&&(n=n.replace("%znak%",r.znak).replace("%temper%",r.value)),n=n.replace("%znak"+t+"%",r.znak).replace("%temper"+t+"%",r.value).replace("%znak_min"+t+"%",r.min.znak).replace("%temper_min"+t+"%",r.min.value).replace("%znak_max"+t+"%",r.max.znak).replace("%temper_max"+t+"%",r.max.value).replace(/%temper_units%/g,e.t.units).replace(/%deg%/g,e.t.units).replace("%pic"+t+"%",e.pic).replace("%pic"+t+"_descr%",e.descr).replace("%pic"+t+"_descr%",e.descr).replace("%pic"+t+"_descr%",e.descr).replace(/%press%/g,e.press.value).replace("%press"+t+"%",e.press.value).replace(/%press_units%/g,e.press.units).replace(/%hum%/g,e.hum.value).replace("%hum"+t+"%",e.hum.value).replace(/%hum_units%/g,e.hum.units);var o=s(e.wd,e.ws);0==t&&(n=n.replace(/%wind%/g,o.dir).replace(/%wind_speed%/g,void 0!==o.speed?o.speed:"").replace(/%wind_units%/g,void 0!==o.speed?e.ws.units:"")),n=n.replace("%wind"+t+"%",o.dir).replace("%wind_speed"+t+"%",void 0!==o.speed?o.speed:"").replace("%wind_units"+t+"%",void 0!==o.speed?e.ws.units:"").replace("%tod"+t+"%",i.dict.tods["tod"+e.tod]).replace("%date"+t+"%",i.dict.weekdays[e.weekday-1]+", ").replace("%hour"+t+"%",(e.hour.length>1?e.hour:"0"+e.hour)+":00")}),void 0!==l.forecast3&&l.forecast3.forEach(function(e,t){var r=a(e.t.value,e.t.units),o=a(e.tn.value,e.tn.units),c=s(e.wd,e.ws);n=n.replace("%forecast.znak"+t+"%",r.znak).replace("%forecast.temper"+t+"%",r.value).replace("%forecast.znak_min"+t+"%",r.min.znak).replace("%forecast.temper_min"+t+"%",r.min.value).replace("%forecast.znak_max"+t+"%",r.max.znak).replace("%forecast.temper_max"+t+"%",r.max.value).replace("%forecast.n.znak"+t+"%",o.znak).replace("%forecast.n.temper"+t+"%",o.value).replace("%forecast.n.znak_min"+t+"%",o.min.znak).replace("%forecast.n.temper_min"+t+"%",o.min.value).replace("%forecast.n.znak_max"+t+"%",o.max.znak).replace("%forecast.n.temper_max"+t+"%",o.max.value).replace(/%temper_units%/g,e.t.units).replace(/%deg%/g,e.t.units).replace("%forecast.pic"+t+"%",e.pic).replace("%forecast.pic"+t+"_descr%",e.descr).replace("%forecast.pic"+t+"_descr%",e.descr).replace("%forecast.wind"+t+"%",c.dir).replace("%forecast.wind_speed"+t+"%",void 0!==c.speed?c.speed:"").replace(/%wind_units%/g,void 0!==c.speed?e.ws.units:"").replace("%forecast.mindate"+t+"%",i.dict.weekdays[e.weekday-1]+", "+e.day).replace("%forecast.date"+t+"%",i.dict.weekdays[e.weekday-1]+", "+e.day+" "+i.dict.min_months[e.month-1].toLowerCase()).replace("%forecast.fulldate"+t+"%",i.dict.weekdays[e.weekday-1]+", "+e.day+" "+i.dict.months[e.month-1])}),void 0!==l.danger&&(l.danger.forEach(function(e,t){n=n.replace("%display_row%","table-row"),n=0===parseInt(e.dclass,10)?n.replace("%display_data%","none").replace("%display_data2%","none").replace("%display_data3%","none").replace("%display_nearest_time%","block"):n.replace("%display_data%","block").replace("%display_data2%","block").replace("%display_data3%","block").replace("%display_nearest_time%","none"),n=n.replace("%src%",'src="//www.meteonova.ru/informer/html/icons/'+e.dclass+'.svg"').replace("%descr"+t+"%",e.title).replace("%descr"+t+"%",e.title).replace("%descr"+t+"%",e.title),n=i.type.indexOf("rubber")>-1?n.replace("%min_dayofweek2%, %hours2%:00",0!==parseInt(e.dclass,10)?i.dict.weekdays[e.weekday-1]+", "+(e.hour.length>1?e.hour:"0"+e.hour)+":00":"").replace("%min_dayofweek3%, %day% %min_months% %hours3%:00",0!==parseInt(e.dclass,10)?i.dict.weekdays[e.weekday-1]+", "+e.day+" "+i.dict.min_months[e.month-1].toLowerCase()+" "+(e.hour.length>1?e.hour:"0"+e.hour)+":00":""):n.replace("%day%",e.day).replace("%min_months%",i.dict.min_months[e.month-1].toLowerCase()),n=n.replace("%min_dayofweek%",i.dict.weekdays[e.weekday-1]).replace("%dayofweek%",i.dict.full_weekdays[e.weekday-1]).replace("%months%",i.dict.months[e.month-1]).replace("%hours%",e.hour.length>1?e.hour:"0"+e.hour)}),n=n.replace(/%src%/g,"").replace(/%display_row%/g,"none").replace(/%display_data%/g,"none").replace(/%display_data2%/g,"none").replace(/%display_data3%/g,"none")),n})},this.setScheme=function(e,t,r){this.scheme[e]=t,!1!==r&&(clearTimeout(this.timeout),this.timeout=setTimeout($.proxy(function(){this.draw(this.obj,this.data)},this),250))},this.fillColorSvgIcon=function(e,t,r){try{for(var i=e.document.getElementById(t).getSVGDocument().getElementsByTagName("path"),o=0;o<i.length;o++)i[o].setAttribute("fill",r)}catch(e){}},this.setCodeInformer=function(e){e.code={},$.extend(e.code,code);var t="/weather/";e.type.indexOf("med")>-1&&(t="/med/"),e.type.indexOf("auto")>-1&&(t="/auto/"),e.type.indexOf("avia")>-1&&(t="/avia/"),e.code.html=e.code.html.replace("%type%",e.type).replace("%cities%",e.cities).replace(/%alt%/g,e.alt).replace("%suffix%",1==e.cities.split("_").length&&"auto"!=e.cities?t+e.cities+(void 0!==e.name_ref?"-"+e.name_ref:"")+".htm":"");var r=null;e.type.indexOf("multiple")>-1&&(r="300px"),e.type.indexOf("rubber")>-1&&(r="240px"),void 0!==e.width&&(r=e.width),this.code.js=this.code.js.replace("%type%",e.type).replace("%width%",r?'&#09;&#09;&#09;width: "'+r+'",<br>':"").replace("%cities%","auto"!=e.cities?'&#09;&#09;&#09;cities: &#91;"'+e.cities.split("_").join('","')+'"&#93;,<br>':"").replace("%scheme%",JSON.stringify(e.scheme)),$(".infcode").html(e.code.html+"<br>"+e.code.js)},this.install()}Array.prototype.reversedCopy=function(){for(var e=[],t=this.length;t--;)e.push(this[t]);return e};var colorSchemes={gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e8f7ff","#ccedff","#a3daff","#72c3fc","#4dadf7","#329af0","#228ae6","#1c7cd6","#1b6ec2","#1862ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};colorSchemes.dark_gray=colorSchemes.gray.reversedCopy();var code={html:'&lt;a style="display: block; position: relative; border: 0; padding: 0; margin: 0; text-decoration: none;" id="meteonova_inf_%type%_%cities%" href="//www.meteonova.ru%suffix%" alt="%alt%" title="%alt%"&gt;&lt;/a&gt;',js:'&lt;script type="text/javascript"&gt;<br>(function() {<br>&#09;var script = document.createElement("script");<br>&#09;script.src = "//www.meteonova.ru/informer/html/js/install.min.js";<br>&#09;script.charset = "UTF-8";<br>&#09;script.defer = true;<br>&#09;script.onload = function() {<br>&#09;&#09;new MeteonovaInf({<br>%width%&#09;&#09;&#09;type: "%type%",<br>%cities%&#09;&#09&#09;scheme: %scheme%<br>&#09;&#09;});<br>&#09;};<br>&#09;document.getElementsByTagName("head")[0].appendChild(script);<br>})();<br>&lt;/script&gt;'},informer=null,colorscheme="gray",timeout=null,showCitiesList=null,colorpicker_settings={align:"left",customClass:"colorpicker-2x",sliders:{saturation:{maxLeft:200,maxTop:200},hue:{maxTop:200},alpha:{maxTop:200}}};window.onload=function(){if("undefined"==typeof type)return!1;var e=0;type.indexOf("rubber")>-1&&(e=240),type.indexOf("multiple")>-1&&(e=180),0!==e&&$("#resizeble").width(e),informer=new MeteonovaInf({id:"informer",type:type,cities:cities,colorscheme:colorscheme,callback:function(){$("#informer").css("height",this.height);try{this.data.length>0&&"object"==typeof informer.opt.cities&&$(".citySearch.tt-input").val("").prop("placeholder",this.data[0].forecasts[0].name),"object"==typeof informer.opt.cities&&"function"==typeof showCitiesList&&showCitiesList.call({data:this.data,cities:informer.cities});try{$("#resizeble").resizable("destroy"),$("#resizeble").css("width","auto")}catch(e){}var t=parseInt(this.height.replace("px",""),10)+20;type.indexOf("rubber")>-1||type.indexOf("multiple")>-1?$("#resizeble").resizable({minHeight:t,maxHeight:t,minWidth:type.indexOf("multiple")>-1?180:140,create:function(t,r){0!==e&&$("#resizeble").width(e),$("#inf_width").css("display","block");var i=$("#resizeble").width();$("#inf_width_value").val(i),informer.width=i+"px"},resize:function(t,r){var i=r.size.width;$("#inf_width_value").val(i-20),informer.width=i-20+"px",informer.setCodeInformer(informer),e=i-20,informer.resize(),$("#resizeble").css("height",informer.ifr.contentWindow.document.body.offsetHeight+20+"px")}}):$("#inf_width").css("display","none")}catch(e){}}}),$("#site_color").colorpicker({color:"#fff",align:colorpicker_settings.align,customClass:colorpicker_settings.customClass,sliders:colorpicker_settings.sliders}).on("changeColor",function(e){$("#resizeble").css("background",e.color.toString("hex"))}),$("#is_border").change(function(){this.checked?informer.setScheme("box_shadow","inset "+$("#border_color").colorpicker("getValue")+" 0 0 0 1px"):informer.setScheme("box_shadow","none"),$("#border_color").colorpicker(this.checked?"enable":"disable")}),$("#is_border_radius").change(function(){this.checked?informer.setScheme("border_radius","4px"):informer.setScheme("border_radius","0")}),$("#is_transparent_background").change(function(){this.checked?informer.setScheme("background_color","transparent"):informer.setScheme("background_color",$("#background_color").length>0?$("#background_color").colorpicker("getValue"):colorSchemes[colorscheme][1]),$("#background_color").colorpicker(this.checked?"disable":"enable")}),$("#border_color").colorpicker({color:colorSchemes[colorscheme][2],align:colorpicker_settings.align,customClass:colorpicker_settings.customClass,sliders:colorpicker_settings.sliders}).on("changeColor",function(e){informer.setScheme("border_color",e.color.toString("hex")),informer.setScheme("box_shadow","inset "+e.color.toString("hex")+" 0 0 0 1px")}),$("#background_color").colorpicker({color:colorSchemes[colorscheme][0],align:colorpicker_settings.align,customClass:colorpicker_settings.customClass,sliders:colorpicker_settings.sliders}).on("changeColor",function(e){informer.setScheme("background_color",e.color.toString("hex"))}),$("#city_color").colorpicker({color:colorSchemes[colorscheme][9],align:colorpicker_settings.align,customClass:colorpicker_settings.customClass,sliders:colorpicker_settings.sliders}).on("changeColor",function(e){informer.setScheme("city_color",e.color.toString("hex"))}),$("#main_color").colorpicker({color:colorSchemes.gray[7],align:colorpicker_settings.align,customClass:colorpicker_settings.customClass,sliders:colorpicker_settings.sliders}).on("changeColor",function(e){informer.setScheme("main_color",e.color.toString("hex"))}),$("#params_color").colorpicker({color:colorSchemes.gray[6],align:colorpicker_settings.align,customClass:colorpicker_settings.customClass,sliders:colorpicker_settings.sliders}).on("changeColor",function(e){informer.setScheme("params_color",e.color.toString("hex"))}),$(".colorscheme").unbind("click").bind("click",function(){return colorscheme=$(this).attr("data")||"gray",$("#border_color").colorpicker("setValue",colorSchemes[colorscheme][2]),$("#background_color").colorpicker("setValue",colorSchemes[colorscheme][1]),$("#city_color").colorpicker("setValue",colorSchemes[colorscheme][8]),$("#main_color").colorpicker("setValue","dark_gray"===colorscheme?colorSchemes.dark_gray[8]:colorSchemes.gray[7]),$("#params_color").colorpicker("setValue","dark_gray"===colorscheme?colorSchemes.dark_gray[7]:colorSchemes.gray[6]),$("#background_color").colorpicker("enable"),$("#is_transparent_background").prop("checked",!1),!1}),$("#is_auto_city").change(function(){var e="27612";this.checked?($(".citySearch").prop("disabled",!0),$(".citySearch").selectpicker("refresh"),e="auto"):($(".citySearch").prop("disabled",!1),$(".citySearch").selectpicker("refresh")),informer=new MeteonovaInf({id:"informer",type:informer.type,cities:[e],colorscheme:informer.scheme})}),$("#inf_width_value").keydown(function(t){if(!(-1!==$.inArray(t.keyCode,[46,8,9,27,110,190])||65==t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||67==t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||88==t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||t.keyCode>=35&&t.keyCode<=39)&&((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),13==t.keyCode)){t.preventDefault();var r=$(this).val(),i=180;informer.type.indexOf("rubber")>-1&&(i=140),r<i&&(r=i,$(this).val(r)),$("#resizeble").css("width",parseInt(r,10)+20+"px"),informer.width=r+"px",e=parseInt(r,10),informer.resize(),$("#resizeble").css("height",informer.ifr.contentWindow.document.body.offsetHeight+20+"px"),informer.setCodeInformer(informer)}}),$(".citySearch").typeahead({hint:!0,minLength:1,highlight:!0},{display:"value",limit:7,templates:{suggestion:function(e){return"<div><strong>"+e.value+"</strong>, "+e.cdm+"</div>"}},source:function(e,t,r){return $.ajax({url:"/sinpl?fchar="+encodeURIComponent(e)+"&searchby=cities&mcntcities=8",type:"GET",dataType:"json",success:function(e,t,i){var o=[];return $.each(e.items,function(){var e={value:this.name,id:this.id,cdm:this.c_name+(this.d_name?", "+this.d_name:"")+(this.mun_name?", "+this.mun_name:"")};o.push(e)}),console.log(["newData",o]),r(o)},error:function(){}})}}),$(".citySearch").bind("typeahead:select",function(e,t){var r=t.id,i=informer.cities.split("_");i.unshift(r),i=informer.type.indexOf("multiple")>-1?i:[r],void 0!==MeteonovaInf&&(informer=new MeteonovaInf({id:"informer",type:informer.type,cities:i,colorscheme:informer.scheme,callback:showCitiesList}))}).bind("typeahead:active",function(){$(this).prop("placeholder","")}),showCitiesList=function(){try{if(this.data.length>1){$("#is_auto_city").prop("checked",!1).prop("disabled",!0),$(".citiesList").css("display","block");var e=$(".citiesList ul");e.find("li").remove();var t=this.cities.split("_");this.data.forEach(function(r,i){var o=$('<li style="position:relative">');o.addClass("list-group-item list-group-item-action");var c=r.forecasts[0];o.html(c.name);var a=$('<button type="button" style="display: '+(i>0?"block":"none")+';position: absolute; top: 8px; right:40px; border: 0;" class="btn btn-default btn-xs glyphicon glyphicon-arrow-up up" aria-hidden="true"></button>').bind("click",function(e){var r=$(this).closest("li"),i=r.closest("ul").find("li").index(r);t.splice(i-1,0,t[i]),t.splice(i+1,1);var o=t.join("_");informer=new MeteonovaInf({id:"informer",type:informer.type,cities:o.split("_"),colorscheme:informer.scheme});var c=r.prev();return r.insertBefore(c),0==r.parent("ul").find("li").index(r)&&(r.find(".up").css("display","none"),c.find(".up").css("display","block")),!1}),s=$('<button type="button" style="position: absolute; top: 8px; right:15px; border: 0;" class="btn btn-default btn-xs glyphicon glyphicon-remove remove" aria-hidden="true"></button>').bind("click",function(e){var r=$(this).closest("li"),i=r.closest("ul").find("li").index(r);t.splice(i,1);var o=t.join("_");informer=new MeteonovaInf({id:"informer",type:informer.type,cities:o.split("_"),colorscheme:informer.scheme});var c=r.next();return r.remove(),0==c.closest("ul").find("li").index(c)&&c.find(".up").css("display","none"),1==c.closest("ul").find("li").length&&$(".remove").css("display","none"),!1});e.append(o.append(a).append(s))})}else $(".citiesList").css("display","none"),$("#is_auto_city").prop("disabled",!1)}catch(e){}}};